lunr:
	Inherits: ^Infantry
	Inherits@AUTOTARGET: ^AutoTargetAllAssaultMove
	Inherits@EXPERIENCE: ^GainsExperience
	Inherits@VOICES: ^WithFeedbackVoicelines
	HiddenUnderFog:
		Type: CenterPosition
	Buildable:
		Queue: Infantry.Shared, Infantry.Soviets
		BuildAtProductionType: Soldier
		BuildPaletteOrder: 70
		Prerequisites: ~infantry.soviets, yadome, ~techlevel.3
		Description: Airborne soldier.\n\n  Strong vs Infantry, Aircraft\n  Weak vs Vehicles
		BuildDuration: 375
		BuildDurationModifier: 100
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Valued:
		Cost: 600
	Tooltip:
	Tooltip@NoRow:
		Name: Cosmonaut
	Selectable:
		Bounds: 482, 1448, 0, -530
	Health:
		HP: 12500
	-Mobile:
	RevealsShroud:
		Range: 8c0
		Type: GroundPosition
		RequiresCondition: !airborne
	RevealsShroud@Ground:
		Range: 8c0
		Type: GroundPosition
		RequiresCondition: airborne
	# RevealsShroudToIntelligenceOwner:
	#	Range: 8c0
	#	Type: GroundPosition
	Armor:
		Type: Light
	Armament@primary:
		Weapon: LunarLaser
		Damage: 20
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-ground
		PauseOnCondition: chronodisable || reload-air
		RequiresCondition: !rank-elite && !capacitors
	Armament@primary-aa:
		Weapon: LunarLaserAA
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-air
		PauseOnCondition: chronodisable || reload-ground
		RequiresCondition: !rank-elite && !capacitors
	Armament@elite:
		Weapon: LunarLaserE
		Damage: 25
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-ground
		PauseOnCondition: chronodisable || reload-air
		RequiresCondition: rank-elite && !capacitors
	Armament@elite-aa:
		Weapon: LunarLaserAAE
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-air
		PauseOnCondition: chronodisable || reload-ground
		RequiresCondition: rank-elite && !capacitors
	Armament@primary-capacitors:
		Weapon: LunarLaserUpg
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-ground
		PauseOnCondition: chronodisable || reload-air
		RequiresCondition: !rank-elite && capacitors
	Armament@primary-aa-capacitors:
		Weapon: LunarLaserAAUpg
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-air
		PauseOnCondition: chronodisable || reload-ground
		RequiresCondition: !rank-elite && capacitors
	Armament@elite-capacitors:
		Weapon: LunarLaserUpgE
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-ground
		PauseOnCondition: chronodisable || reload-air
		RequiresCondition: rank-elite && capacitors
	Armament@elite-aa-capacitors:
		Weapon: LunarLaserAAUpgE
		LocalOffset: 128,196,512, 128,-196,512
		ReloadingCondition: reload-air
		PauseOnCondition: chronodisable || reload-ground
		RequiresCondition: rank-elite && capacitors
	AttackAircraft:
		Voice: Attack
		FacingTolerance: 2
		AttackType: Hover
	Aircraft:
		CruiseAltitude: 3c852
		InitialFacing: 80
		TurnSpeed: 787
		Speed: 150
		AltitudeVelocity: 240
		MaximumPitch: 128
		Voice: Move
		AirborneCondition: airborne
		IdealSeparation: 512
		VTOL: true
		CanSlide: true
		CanHover: true
	WithInfantryBody:
		RequiresCondition: !airborne
	WithInfantryBody@Air:
		StandSequences: fly
		MoveSequence: fly
		DefaultAttackSequence: shoot-air
		IdleSequences: idle-air
		RequiresCondition: airborne
	Hovers:
		BobDistance: -45
	-TimedConditionBar@WebDisable:
	-SpeedMultiplier@WebDisable:
	-WithIdleOverlay@web:
	-Targetable@webdisable:
	-ExternalCondition@webdisable:
	-WithColoredOverlay@IDISABLE:
	-GrantCondition@IDISABLE:
	-SpeedMultiplier@DOGSTUN:
	-Targetable@DOGSTUN:
	-TimedConditionBar@DOGSTUN:
	-ExternalCondition@dogstun:
	-InfectableRV:
	-Targetable@DRONE:
	-SpeedMultiplier@DRONE:
	-RevealsShroud@DRONE:
	-ExplodeWeapon@dronesparks:
	-Crushable:
	-Crushable@Cheater:
	-Crushable@Vengeful:
	-TakeCover:
	-Targetable:
	-TurnOnIdle:
	-WithDeathAnimation@normal:
	-WithDeathAnimation@effect:
	-DamagedByTintedCells:
	-DamagedByTintedCells@ORANGE:
	DeathSounds@normal:
		DeathTypes: ExplosionDeath, BulletDeath, RadiationDeath, OrangeRadiationDeath, PsychicDeath, ElectroDeath, FlameDeath, VirusDeath, BruteDeath
	-DeathSounds@zapped:
	-DeathSounds@radiation:
	-DeathSounds@psycrush:
	-DeathSounds@virus:
	Targetable@airborne:
		TargetTypes: Air, Disguise
		RequiresCondition: airborne
	Targetable@ground:
		TargetTypes: Ground, Infantry, DetonateAttack, Disguise
		RequiresCondition: !airborne
	WithSpriteBody@shadow:
		Name: shadow
		Sequence: shadow
		ForceToGround: true
	Voiced:
		VoiceSet: CosmonautVoice
	# AmbientSound:
	#	SoundFiles: iroclo2a.wav, iroclo2b.wav, iroclo2c.wav
	#	Volume: 0.25
	#	RequiresCondition: moving
	# GrantConditionOnMovement:
	#	Condition: moving
	ProducibleWithLevel@1:
		Prerequisites: barracks.infiltratedorbaacdm
	WithProductionIconOverlay@1:
		Prerequisites: barracks.infiltratedorbaacdm
		Types: chevron-veteran
	ProducibleWithLevel@2:
		Prerequisites: barracks.infiltrated, baacdm
	WithProductionIconOverlay@2:
		Prerequisites: barracks.infiltrated, baacdm
		Types: chevron-elite
	QuantizeFacingsFromSequence:
		Sequence: stand
	-Passenger:
	-ChangesHealth@AMBULANCE:
	SpawnActorOnDeath:
		Actor: lunr.husk

lunr.husk:
	Inherits: ^HelicopterHusk
	Inherits@1: ^SpriteActor
	WithFacingSpriteBody:
	-RenderVoxels:
	-WithVoxelBody:
	Tooltip:
	Tooltip@NoRow:
		Name: Cosmonaut
	Aircraft:
		TurnSpeed: 40
		Speed: 180
	FallsToEarth:
		Explosion: InfantryExplode
	RevealsShroud:
		Range: 8c0
		Type: GroundPosition
	# RevealsShroudToIntelligenceOwner:
	#	Range: 8c0
	#	Types: SatelliteScan
	#	Type: GroundPosition
	RevealOnDeath:
		Radius: 8c0
		Duration: 125
	WithSpriteBody@shadow:
		Name: shadow
		Sequence: shadow
		ForceToGround: true

lunr.spawner:
	Inherits: ^Infantry
	FreeActor:
		Actor: lunr
		Facing: 640
	KillsSelf:
		RemoveInstead: true
	-TakeCover:
	-MapEditorData:
	RenderSprites:
		Image: lunr
