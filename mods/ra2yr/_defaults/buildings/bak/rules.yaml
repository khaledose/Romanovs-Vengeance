^Building:
	Inherits@1: ^ExistsInWorld
	Inherits@2: ^SpriteActor
	Inherits@3: ^SelectableBuilding
	Inherits@4: ^IronCurtainable
	Inherits@5: ^ForceShieldable
	Inherits@6: ^AcceptsIvanBomb
	Inherits@7: ^AcceptsC4
	Inherits@8: ^BuildingParticles
	Inherits@9: ^ChronoDisableDisabledWithICorForceShield
	Inherits@HANDICAPS: ^PlayerHandicaps
	Inherits@shape: ^1x1Shape
	-DrawLineToTarget:
	AppearsOnMapPreview:
	OwnerLostAction:
		Action: Kill
		DeathTypes: BulletDeath, NonTemporal
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure
	WithColoredOverlay@FLARE:
		Color: FF000080
		RequiresCondition: flare
	ExternalCondition@FLARE:
		Condition: flare
	RevealsShroud:
		Range: 6c0
		MaxHeightDelta: 3
	Building:
		Dimensions: 1,1
		Footprint: x
		BuildSounds: uplace.wav
		RequiresBaseProvider: True
		UndeploySounds: uselbuil.wav
		TerrainTypes: Clear, Rough, Road, DirtRoad
	ActorPreviewPlaceBuildingPreview:
		PreviewAlpha: 0.55
		Palette: placefootprint
		LineBuildFootprintAlpha: 0.5
		FootprintUnderPreview: Valid, LineBuild, Invalid
		FootprintOverPreview: None
	FrozenUnderFog:
	Capturable:
		Types: building
		RequiresCondition: !build-incomplete && !invulnerability && !forceshield
	CaptureNotification:
		TextNotification: Building captured.
	CapturableProgressBar:
		RequiresCondition: !instantcapture
	CapturableProgressBlink:
		Interval: 25
		Sound: ucapture.aud
		RequiresCondition: !instantcapture
	GrantConditionOnPrerequisite@INSTANTCAPTURE:
		Condition: instantcapture
		Prerequisites: global-instantcapture
	SoundOnDamageTransition:
		DamageTypes: NonTemporal
		DamagedSounds: gdamag1a.wav, gdamag1b.wav, gdamag1c.wav, gdamag1d.wav, gdamag1e.wav
		DestroyedSounds: bgendiea.wav, bgendieb.wav, bgendiec.wav, bgendied.wav, bgendiee.wav, bgendief.wav
	WithSpriteBody:
	Explodes:
		DeathTypes: NonTemporal
		Type: Footprint
		Weapon: BuildingExplode
	Explodes@ChronoDisable:
		Type: Footprint
	RepairableBuilding:
		RepairStep: 700
		RepairingNotification: Repairing
	InstantlyRepairable:
		Types: building
		RequiresCondition: !ivanbomb && !c4 && !superC4
	SpawnActorsOnSell@allies:
		ActorTypes: e1, e1, e1
		Factions: america, germany, england, france, korea
	SpawnActorsOnSell@soviets:
		ActorTypes: e2, e2, e2, e2
		Factions: cuba, libya, iraq, russia
	SpawnActorsOnSell@psicorps:
		ActorTypes: init, init, init
		Factions: psicorps
	GrantConditionOnPrerequisite@SUDDENDEATH:
		Condition: suddendeath
		Prerequisites: global-suddendeath
	MustBeDestroyed:
		RequiredForShortGame: true
		RequiresCondition: !suddendeath
	ShakeOnDeath:
		DeathTypes: NonTemporal
	ProximityCaptor:
		Types: Building
	Guardable:
		Range: 3c0
	Demolishable:
		RequiresCondition: !invulnerability && !forceshield && !chronodisable
	HitShape:
		UseTargetableCellsOffsets: true
	Tooltip:
		Name: Structure
		GenericName: Structure
		RequiresCondition: showownername
	Tooltip@NoRow:
		Name: Structure
		GenericName: Structure
		ShowOwnerRow: false
		RequiresCondition: !showownername
	GrantConditionOnPrerequisite@SHOWOWNERNAME:
		Condition: showownername
		Prerequisites: global-showownername
	MapEditorData:
		Categories: Building
	WithBuildingRepairDecoration:
		Image: allyrepair
		Sequence: repair
		Position: Center
		Palette: mouse
	CaptureManager:
	RangedGpsDot:
		Sequence: Structure

^BaseStructure:
	Inherits: ^Building
	WithMakeAnimation:
		Condition: build-incomplete
	Building:
		SecondaryTerrainTypes: Water
	Sellable:
		SellSounds: uselbuil.wav
		Notification: StructureSold
		RequiresCondition: !build-incomplete && !chronodisable
	Targetable:
		RequiresCondition: !in_water
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure
		RequiresCondition: in_water
	SpawnActorsOnSell@allies:
		RequiresCondition: !in_water
	SpawnActorsOnSell@soviets:
		RequiresCondition: !in_water
	SpawnActorsOnSell@psicorps:
		RequiresCondition: !in_water
	GrantConditionOnTerrain@Water:
		TerrainTypes: Water, Beach
		Condition: in_water
	RequiresBuildableArea:
		AreaTypes: building
		Adjacent: 3
	GivesBuildableArea:
		AreaTypes: building, defense

^SupportBuilding:
	Inherits: ^BaseStructure
	-Capturable:
	-CaptureNotification:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-GrantConditionOnPrerequisite@INSTANTCAPTURE:
	-ShakeOnDeath:
	-GivesBuildableArea:
	MustBeDestroyed:
		RequiredForShortGame: false
	Building:
		SecondaryTerrainTypes: Water
	RevealOnFire:
		ArmamentNames: primary, secondary, gatling, support, garrisoned, garrisoned-secondary
		Duration: 50
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, Defense, NonGarrisonableStructure
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, Defense
	RangedGpsDot:
		Sequence: Defense
	RequiresBuildableArea:
		AreaTypes: defense

^BuildingPlug:
	Interactable:
	AlwaysVisible:
	Building:
		BuildSounds: uplace.wav
		UndeploySounds: uselbuil.wav
	FootprintPlaceBuildingPreview:
		Palette: placefootprint
	KillsSelf:
		RemoveInstead: true
	RenderSprites:

^PrimaryBuilding:
	WithTextDecoration@primary:
		RequiresSelection: true
		Text: PRIMARY
		Position: Top
		RequiresCondition: primary && !multiqueue
	PrimaryBuilding:
		PrimaryCondition: primary
		SelectionNotification: PrimaryBuildingSelected
		SelectionTextNotification: Primary building selected.
		RequiresCondition: !multiqueue
	GrantConditionOnPrerequisite@multiqueue:
		Condition: multiqueue
		Prerequisites: global-multiqueue
	FreeActor@Dummy:
		Actor: QueueUpdaterDummy
		RequiresCondition: updatequeue
	GrantConditionAfterDelay:
		Delay: 1
		Condition: updatequeue
		ShowSelectionBar: false

^CivBuilding:
	Inherits: ^Building
	-OwnerLostAction:
	-Capturable:
	-CaptureNotification:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-GrantConditionOnPrerequisite@INSTANTCAPTURE:
	-GrantConditionOnPrerequisite@SUDDENDEATH:
	-MustBeDestroyed:
	-GivesExperience:
	-UpdatesPlayerStatistics:
	-RepairableBuilding:
	-WithBuildingRepairDecoration:
	Buildable:
		Queue: Building.Civilian
	InstantlyRepairable:
		Types: civilian
	Health:
		HP: 140000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c0
	Tooltip:
		Name: Civilian Building
	Tooltip@NoRow:
		Name: Civilian Building
	MapEditorData:
		Categories: Civilian building

^GarrisonableBuilding:
	Inherits: ^CivBuilding
	Inherits@AUTOTARGET: ^AutoTargetAll
	RevealsShroud:
		Range: 10c0
		RequiresCondition: loaded
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 10c0
	#	RequiresCondition: loaded
	ChangeOwnerOnGarrisoner:
		EnterSound: ugarris.wav
		ExitSound: ugarris.wav
		EnterNotification: StructureGarrisoned
		ExitNotification: StructureAbandoned
	Garrisonable:
		Types: Garrisoner
		MaxWeight: 10
		AfterLoadDelay: 0
		BeforeUnloadDelay: 0
		AfterUnloadDelay: 0
		EjectOnDeath: true
		OwnerChangedAffectsGarrisoners: false
		LoadedCondition: loaded
		PauseOnCondition: chronodisable
		RequiresCondition: !dmg_crit
	WithGarrisonPipsDecoration:
		EmptySequence: pip-garrison-empty
		FullSequence: pip-garrison-green
		Margin: 4, 3
		PipStride: 4, 2
		Palette: ra
		Position: BottomLeft
		RequiresSelection: true
		CustomPipSequences:
			gray: pip-garrison-gray
			yellow: pip-garrison-yellow
			blue: pip-garrison-blue
			red: pip-garrison-red
	AttackOpenTopped:
		Armaments: garrisoned, garrisoned-secondary
		PortOffsets: 768,0,1024, 448,-682,1024, -448,-682,1024, -768,0,1024, -448,682,1024, 448,682,1024
		PauseOnCondition: chronodisable
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure
	Targetable@GARRISONED:
		TargetTypes: Defense, GarrisonedStructure
		RequiresCondition: loaded
	WithSpriteBody:
		RequiresCondition: !loaded
	WithSpriteBody@GARRISONED:
		Name: garrisoned
		Sequence: garrisoned
		RequiresCondition: loaded
	InstantlyRepairable:
		RequiresCondition: !ivanbomb && !c4 && !superC4 && damaged
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical

^Rubble:
	Inherits@1: ^SpriteActor
	Inherits@shape: ^1x1Shape
	Building:
		Dimensions: 1,1
		Footprint: _
	RenderSprites:
		Palette: rubble
	WithSpriteBody:
		Sequence: rubble
	FrozenUnderFog:
	HitShape:
		UseTargetableCellsOffsets: true
	MapEditorData:
		Categories: Building rubble
	Interactable:

^TechBuilding:
	Inherits: ^Building
	-GrantConditionOnPrerequisite@SUDDENDEATH:
	-MustBeDestroyed:
	-GivesExperience:
	-UpdatesPlayerStatistics:
	OwnerLostAction:
		Action: ChangeOwner
	Buildable:
		Queue: Building.Tech
	Building:
		SecondaryTerrainTypes: Water
	Health:
		HP: 90000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 5c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 5c0
	#	RequiresCondition: enabled
	Targetable:
		RequiresCondition: !in_water
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure
		RequiresCondition: in_water
	GrantConditionOnTerrain@Water:
		TerrainTypes: Water, Beach
		Condition: in_water
	WithIdleOverlay@waves:
		Sequence: idle-waves
		PauseOnCondition: chronodisable
		RequiresCondition: in_water
	GrantConditionOnCombatantOwner:
		Condition: enabled
	Capturable:
		Types: tech
		RequiresCondition: !invulnerability
	CaptureNotification:
		Notification: TechBuildingCaptured
		TextNotification: Tech building captured.
		LoseNotification: TechBuildingLost
		LoseTextNotification: Tech building lost.
	GivesBuildableArea:
		AreaTypes: building, defense
		RequiresCondition: techbuild
	BaseProvider:
		Range: 5c0
		RequiresCondition: techbuild
	GrantConditionOnPrerequisite@BUILD:
		Condition: techbuild
		Prerequisites: global-techbuildarea
	MapEditorData:
		Categories: Tech building

^Flag:
	Inherits: ^CivBuilding
	OwnerLostAction:
		Action: ChangeOwner
	IsometricSelectable:
		DecorationHeight: 120
	Building:
		Footprint: x
		Dimensions: 1, 1
		TerrainTypes: Clear, Rough, Road, DirtRoad, Water
	Tooltip:
		Name: Flag
	Tooltip@NoRow:
		Name: Flag
	Health:
		HP: 2000
	Armor:
		Type: Steel
	RevealsShroud:
		Range: 6c0
	Targetable:
		RequiresCondition: !in_water
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure
		RequiresCondition: in_water
	GrantConditionOnTerrain@Water:
		TerrainTypes: Water, Beach
		Condition: in_water
	WithIdleOverlay@flag:
		Sequence: flag
		Palette: player
		IsPlayerPalette: false
		PauseOnCondition: chronodisable
	WithIdleOverlay@flag_shadow:
		Sequence: flag-shadow
		Palette: shadow
		IsPlayerPalette: false
		PauseOnCondition: chronodisable
	WithIdleOverlay@waves:
		Sequence: idle-waves
		PauseOnCondition: chronodisable
		RequiresCondition: in_water
	SoundOnDamageTransition:
		DamagedSounds: bmetdama.wav, bmetdamb.wav, bmetdamc.wav
		DestroyedSounds: bmetdama.wav, bmetdamb.wav, bmetdamc.wav
	MapEditorData:
		Categories: Flag

^VoxelLighting:
	Inherits: ^SupportBuilding
	RenderVoxels:
		Scale: 11.7
		LightYaw: 800
		LightPitch: 150
		LightAmbientColor: -0.5,-0.5,-0.5
		LightDiffuseColor: 1.3,1.3,1.3

^Wall:
	Inherits@1: ^ExistsInWorld
	Inherits@2: ^SpriteActor
	Inherits@HANDICAPS: ^PlayerHandicaps
	Inherits@shape: ^1x1Shape
	AppearsOnMapPreview:
	OwnerLostAction:
		Action: ChangeOwner
	FrozenUnderFog:
	-GivesExperience:
	-CombatDebugOverlay:
	-DrawLineToTarget:
	Building:
		Dimensions: 1,1
		Footprint: x
		RequiresBaseProvider: false
		BuildSounds: uplace.wav
		TerrainTypes: Clear, Rough, Road, DirtRoad
	FootprintPlaceBuildingPreview:
		Palette: placefootprint
		LineBuildFootprintAlpha: 0.5
	BlocksProjectiles:
	LineBuild:
		Range: 6
		NodeTypes: wall
	LineBuildNode:
		Types: wall
	Targetable:
		TargetTypes: Ground, Wall, DetonateAttack, NoAutoTarget
	WithWallSpriteBody:
		Type: wall
	Sellable:
		Notification: StructureSold
		SellSounds: uselbuil.wav
	Valued:
		Cost: 100
	CustomSellValue:
		Value: 0
	Health:
		HP: 30000
	Armor:
		Type: Concrete
	Crushable:
		CrushClasses: wall
	HitShape:
	Tooltip:
		Name: Wall
		GenericName: Wall
		RequiresCondition: showownername
	Tooltip@NoRow:
		Name: Wall
		GenericName: Wall
		ShowOwnerRow: false
		RequiresCondition: !showownername
	GrantConditionOnPrerequisite@SHOWOWNERNAME:
		Condition: showownername
		Prerequisites: global-showownername
	MapEditorData:
		Categories: Wall
	RequiresBuildableArea:
		AreaTypes: building
		Adjacent: 6
	Interactable:
	RangedGpsDot:
		Sequence: Wall

^Fence:
	Inherits: ^Wall
	Buildable:
		Queue: Support.Civilian
	Valued:
		Cost: 25
	Health:
		HP: 10000
	Armor:
		Type: Wood
	-BlocksProjectiles:
	LineBuild:
		NodeTypes: fence
	LineBuildNode:
		Types: fence
	Targetable:
		TargetTypes: Ground, Fence, DetonateAttack, NoAutoTarget
	WithWallSpriteBody:
		Type: fence
	Crushable:
		CrushClasses: fence
	SoundOnDamageTransition:
		DamagedSounds: gblacrua.wav, gblacrub.wav
		DestroyedSounds: gblacrua.wav, gblacrub.wav
	Tooltip:
		Name: Fence
		GenericName: Fence
	Tooltip@NoRow:
		Name: Fence
		GenericName: Fence

^Gate:
	Inherits: ^Building
	IsometricSelectable:
		DecorationHeight: 30
	AppearsOnMapPreview:
	Huntable:
	Valued:
		Cost: 75
	Health:
		HP: 35000
	Armor:
		Type: Concrete
	LineBuildNode:
		Types: wall, gate
	-Capturable:
	-CaptureNotification:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-GrantConditionOnPrerequisite@INSTANTCAPTURE:
	-GrantConditionOnPrerequisite@SUDDENDEATH:
	-MustBeDestroyed:
	-WithSpriteBody:
	WithGateSpriteBody:
		OpenSequence: open
	Buildable:
		Description: Automated barrier that opens for allied units.\n\n  Cannot be placed on water.\n  Can be rotated.
	HitShape:
		Type: Rectangle
			LocalYaw: -128
			TopLeft: -512, -512
			BottomRight: 512, 512
			VerticalTopOffset: 768
	MapEditorData:
		Categories: Wall
	Gate:
		PauseOnCondition: disabled || chronodisable
		OpeningSound: gateup1.aud
		ClosingSound: gatedwn1.aud
		CloseDelay: 100
		BlocksProjectilesHeight: 768
	Sellable:
		RequiresCondition: !chronodisable
	RequiresBuildableArea:
		AreaTypes: building
		Adjacent: 6
	Tooltip:
		Name: Gate
		GenericName: Gate
	Tooltip@NoRow:
		Name: Gate
		GenericName: Gate
	Voiced:
		VoiceSet: GateVoice
		Volume: 0.8

^Gate_A:
	Inherits: ^Gate
	Inherits@shape: ^3x1Shape
	Health:
	Building:
		Dimensions: 3,1
		Footprint: xxx
	RevealsShroud:
		Range: 2c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 2c0
	WithGateSpriteBody:
		WallConnections: -1,0, 3,0
	LineBuildNode:
		Connections: -1,0, 1,0

^Gate_B:
	Inherits: ^Gate
	Inherits@shape: ^1x3Shape
	Health:
	Building:
		Dimensions: 1,3
		Footprint: x x x
	RevealsShroud:
		Range: 2c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 2c0
	WithGateSpriteBody:
		WallConnections: 0,-1, 0,3
	LineBuildNode:
		Connections: 0,-1, 0,1

^Tunnel:
	RenderSprites:
		Palette: terrain
	WithSpriteBody:
	BodyOrientation:
		UseClassicPerspectiveFudge: False
		QuantizedFacings: 1
	Building:
		Dimensions: 3, 3
		Footprint: ___ ___ ___
	Targetable:
	AlwaysVisible:
	TunnelEntrance:
	MapEditorData:
		Categories: Tunnel
	Interactable:
		Bounds: 4344, 8688

^LowBridgeRamp:
	AlwaysVisible:
	RenderSprites:
		Palette: terrain
	WithSpriteBody:
	AppearsOnRadar:
	RadarColorFromTerrain:
		Terrain: Bridge
	AppearsOnMapPreview:
		Terrain: Bridge
	BodyOrientation:
		UseClassicPerspectiveFudge: false
		QuantizedFacings: 1
	Tooltip:
		Name: Wooden Bridge
	MapEditorData:
		Categories: Bridge
	Interactable:

^LowBridge:
	Inherits: ^LowBridgeRamp
	Inherits@1: ^AcceptsIvanBomb
	Inherits@2: ^AcceptsC4
	Targetable:
		TargetTypes: Ground, Building, Bridge
		RequiresForceFire: true
	Health:
		HP: 50000
	Armor:
		Type: Concrete
	HitShape:

^ElevatedBridgePlaceholder:
	AlwaysVisible:
	RenderSprites:
		Palette: terrain
	WithSpriteBody:
	AppearsOnRadar:
	RadarColorFromTerrain:
		Terrain: Bridge
	AppearsOnMapPreview:
		Terrain: Bridge
	BodyOrientation:
		UseClassicPerspectiveFudge: false
		QuantizedFacings: 1
	Tooltip:
		Name: Concrete Bridge
	Immobile:
		OccupiesSpace: false
	MapEditorData:
		Categories: Bridge
	Interactable:
		Bounds: 2316, 6950

^ConstructionYard:
	Inherits: ^BaseStructure
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^4x4Shape
	Inherits@AICash: ^AICashCheat
	Inherits@AI: ^AIMicroManagable
	Buildable:
		Queue: Building.Debug
		Description: Allows construction of base structures.
		BuildDuration: 1125
		BuildDurationModifier: 100
	Building:
		Footprint: xxxx xxxx xxxx xxxx
		Dimensions: 4,4
	ProvidesPrerequisite@default:
	Tooltip:
		Name: Construction Yard
	Tooltip@NoRow:
		Name: Construction Yard
	Health:
		HP: 160000
	Armor:
		Type: Concrete
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Valued:
		Cost: 4000
	Production@Shared:
		Produces: Building.Shared, Support.Shared
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !multiqueue
	Production:
		Produces: Building, Support
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: multiqueue
	ProductionQueue@Building:
		Type: Building
		Group: Building
		DisplayOrder: 1
		LowPowerModifier: 200
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionQueue@Support:
		Type: Support
		Group: Support
		DisplayOrder: 5
		LowPowerModifier: 200
		ReadyAudio: ConstructionComplete
		ReadyTextNotification: Construction complete.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Building
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Building.Shared:
		ProductionType: Building.Shared
	ProductionBar@Building:
		ProductionType: Building
	ProductionBar@Support.Shared:
		ProductionType: Support.Shared
		Color: 8A8A8A
	ProductionBar@Support:
		ProductionType: Support
		Color: 8A8A8A
	GrantConditionOnPrerequisite@multiqueue:
		Condition: multiqueue
		Prerequisites: global-multiqueue
	FreeActor@Dummy:
		Actor: QueueUpdaterDummy
		RequiresCondition: updatequeue
	GrantConditionAfterDelay:
		Delay: 1
		Condition: updatequeue
		ShowSelectionBar: false
	BaseBuilding:
	Transforms:
		IntoActor: mcv
		Offset: 1,1
		Facing: 384
		Voice: Move
		DeployCursor: undeploy
		PauseOnCondition: chronodisable || controlled || disabled
		RequiresCondition: factundeploy && !build-incomplete
	TransformsIntoMobile:
		RequiresCondition: factundeploy && !build-incomplete && !chronodisable && !controlled
		Locomotor: heavytracked
		Voice: Move
	TransformsIntoRepairable:
		RequiresCondition: factundeploy && !build-incomplete && !chronodisable && !controlled
		RepairActors: gadept, nadept, nadepb, caoutp, caoutb
		Voice: Move
		RequiresForceMove: true
	TransformsIntoPassenger:
		RequiresCondition: factundeploy && !build-incomplete && !chronodisable && !controlled
		CargoType: Vehicle
		Voice: Move
		RequiresForceMove: true
	GrantConditionOnPrerequisite@GLOBALFACTUNDEPLOY:
		Condition: factundeploy
		Prerequisites: global-factundeploy
	Capturable:
		RequiresCondition: !suddendeath
	Targetable@MC:
		RequiresCondition: !controlled && !suddendeath
	MustBeDestroyed:
		-RequiresCondition:
	SpawnActorsOnSell@allies:
		ActorTypes: e1, e1, e1, engineer
	SpawnActorsOnSell@soviets:
		ActorTypes: e2, e2, e2, e2, engineer
	SpawnActorsOnSell@psicorps:
		ActorTypes: init, init, init, engineer
	BaseProvider:
		Range: 18c0
		PauseOnCondition: build-incomplete || chronodisable
	TransferTimedExternalConditionOnTransform@INVULNERABILITY:
		Condition: invulnerability
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: ConstructionYardVoice
		Volume: 0.8
	ProvidesPrerequisite@AIantiRush:
		RequiresCondition: !ai-control
		Prerequisite: AIantiRush ## Hack: AI Building control. AI build refinary only when it has a combat producing line.

^PowerPlant:
	Inherits: ^BaseStructure
	Inherits@DRAIN: ^DiskDrainable
	Inherits@MC: ^MindControllableBuilding
	Inherits@POWEROUTAGE: ^DisabledByPowerOutage
	Buildable:
		Queue: Building.Shared, Building
		Prerequisites: ~techlevel.1
		BuildPaletteOrder: 10
		Description: Provides power for other structures.
		BuildDuration: 250
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Power Plant
	Tooltip@NoRow:
		Name: Power Plant
	ProvidesPrerequisite@default:
	ProvidesPrerequisite:
		Prerequisite: power
	Health:
		HP: 50000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: 150
		RequiresCondition: !chronodisable && !forceshieldnopower && !disabled
	GrantCondition@IDISABLE:
		RequiresCondition: power-outage || diskdrain
	GrantConditionOnPrerequisite@forceshield:
		Condition: forceshieldnopower
		Prerequisites: forceshield
	ScalePowerWithHealth:
	SoundOnDamageTransition:
		DestroyedSounds: bpowdiea.wav, bpowdieb.wav
	PowerTooltip:
	Explodes@Reactor:
		DeathTypes: NonTemporal
		Weapon: ReactorExplode
		Type: CenterPosition
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water

^Barracks:
	Inherits: ^BaseStructure
	Inherits@MC: ^MindControllableBuilding
	Inherits@PRIMARY: ^PrimaryBuilding
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 20
		Prerequisites: power, ~techlevel.1
		Description: Trains infantry.\nCan heal nearby infantry.\n\n  Cannot be placed on water.\n  Can be rotated.
		BuildDuration: 175
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Barracks
	Tooltip@NoRow:
		Name: Barracks
	ProvidesPrerequisite:
		Prerequisite: barracks
	ProvidesPrerequisite@production:
		Prerequisite: production
	Building:
		-SecondaryTerrainTypes:
	ExitsDebugOverlay:
	Health:
		HP: 50000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	RallyPoint:
		Palette: mouse
		IsPlayerPalette: false
	CommandBarBlacklist:
		DisableStop: false
	GrantExternalConditionToProduced:
		Condition: produced
	Production@Shared:
		Produces: Infantry.Shared, Soldier
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !multiqueue
	Production:
		Produces: Infantry
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: multiqueue
	ProductionQueue:
		Type: Infantry
		Group: Infantry
		DisplayOrder: 13
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Shared:
		ProductionType: Infantry.Shared
	ProductionBar:
		ProductionType: Infantry
	Power:
		Amount: -35
	InfiltrateForSupportPower:
		Types: SpyInfiltrate
		Proxy: barracks.infiltrated
		InfiltratedNotification: TechnologyStolen
		InfiltrationNotification: BuildingInfiltratedTechnologyStolen
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	GrantConditionOnPrerequisite@megawealth:
		Condition: megawealth
		Prerequisites: global-megawealth
	ProvidesPrerequisite@mwgenref:
		Prerequisite: refinery
		RequiresCondition: megawealth
	ProvidesPrerequisite@mwfacref:
		Prerequisite: garefn
		RequiresCondition: megawealth
	Voiced:
		VoiceSet: BarracksVoice
		Volume: 0.8
	ProvidesPrerequisite@AIantiRush:
		Prerequisite: AIantiRush ## Hack: AI Building control. AI build refinary only when it has a combat producing line.

barracks.infiltrated:
	AlwaysVisible:
	ProvidesPrerequisite:
		Prerequisite: barracks.infiltrated

^Refinery:
	Inherits: ^BaseStructure
	Inherits@DISK: ^DiskStealable
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^NormalRefineryShape
	Inherits@AICash: ^AICashCheat
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 30
		Prerequisites: power, ~!global-megawealth, ~techlevel.1
		Description: Processes ore into credits.\n\n  Can be rotated.
		BuildDuration: 1000
		BuildDurationModifier: 100
	Valued:
		Cost: 2000
	Tooltip:
		Name: Ore Refinery
	Tooltip@NoRow:
		Name: Ore Refinery
	ProvidesPrerequisite:
		Prerequisite: refinery
	ProvidesPrerequisite@default:
	Building:
		Footprint: xxx+ xxx+ xxx+
		Dimensions: 4,3
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Refinery:
		ShowTicks: True
		TickLifetime: 30
		TickVelocity: 1
		TickRate: 10
		UseStorage: false
	DockHost:
		Type: Unload
		DockAngle: 640
		DockOffset: 1c0, 1c0, 0
	CustomSellValue:
		Value: 600
	InfiltrateForCash:
		Types: SpyInfiltrate
		Percentage: 20
		InfiltratedNotification: CashStolen
		InfiltrationNotification: BuildingInfiltratedCashStolen
		Minimum: 500
	FreeActor:
		Actor: cmin
		SpawnOffset: 3,1
		Facing: 640
	SpawnNeighboringActors:
		ActorTypes: refdock
		Locations: 3,1
	WithDockedOverlay:
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@bib:
		Sequence: idle-bib
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@drill:
		Sequence: idle-drill
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Power:
		Amount: -40
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	SpawnActorsOnSell@allies:
		ActorTypes: e1
	SpawnActorsOnSell@soviets:
		ActorTypes: e2
	SpawnActorsOnSell@psicorps:
		ActorTypes: init
	Explodes:
		RequiresCondition: !spawn-ore
	Explodes@Ore:
		Type: Footprint
		DeathTypes: NonTemporal
		Weapon: RefineryExplode
		RequiresCondition: spawn-ore
	GrantConditionOnPlayerResources:
		Condition: spawn-ore
	GrantConditionOnResourceDelivery:
		Condition: resource-delivered
		Duration: 3
	SmokeParticleEmitter@refinerysmoke1:
		RequiresCondition: resource-delivered
		Image: smallsmoke
		Sequences: idle
		Palette: effect50alpha
		SpawnFrequency: 1,2
		Speed: 0, 36
		Gravity: 27, 54
		Duration: 39
	SmokeParticleEmitter@refinerysmoke2:
		RequiresCondition: resource-delivered
		Image: smallsmoke
		Sequences: idle
		Palette: effect50alpha
		SpawnFrequency: 1,2
		Speed: 0, 36
		Gravity: 27, 54
		Duration: 39
	Voiced:
		VoiceSet: RefineryVoice
		Volume: 0.8

^RefineryB:
	Inherits: ^Refinery
	Inherits@SHAPE: ^FlippedRefineryXShape
	-Buildable:
	Building:
		Footprint: xxx xxx xxx +++
		Dimensions: 3,4
	Refinery:
	DockHost:
		Type: Unload
		DockOffset: 1c0, 3c0, 0
		DockAngle: 384
	FreeActor:
		SpawnOffset: 1,3
		Facing: 384
	SpawnNeighboringActors:
		Locations: 1,3

^RefineryC:
	Inherits: ^Refinery
	Inherits@SHAPE: ^FlippedRefineryShape
	-Buildable:
	Building:
		Footprint: +xxx +xxx +xxx
	Refinery:
	DockHost:
		Type: Unload
		DockOffset: 0, 1c0, 0
		DockAngle: 128
	FreeActor:
		SpawnOffset: 0,1
		Facing: 128
	SpawnNeighboringActors:
		Locations: 0,1
	-WithDockedOverlay:
	-WithIdleOverlay@drill:
	-WithIdleOverlay@waves:

^RefineryD:
	Inherits: ^Refinery
	Inherits@SHAPE: ^FlippedRefineryYShape
	-Buildable:
	Building:
		Footprint: +++ xxx xxx xxx
		Dimensions: 3,4
	Refinery:
	DockHost:
		Type: Unload
		DockOffset: 1c0, 0, 0
		DockAngle: 896
	FreeActor:
		SpawnOffset: 1,0
		Facing: 896
	SpawnNeighboringActors:
		Locations: 1,0
	-WithDockedOverlay:
	-WithIdleOverlay@drill:
	-WithIdleOverlay@waves:

refdock:
	Interactable:
	AlwaysVisible:
	Reservable:
	ProximityExternalCondition:
		Condition: on_dock
		Range: 0c768
	Building:
		Footprint: _
		AllowInvalidPlacement: true
	RejectsOrders:

^Silo:
	Inherits: ^BaseStructure
	Inherits@DISK: ^DiskStealable
	Inherits@SHAPE: ^2x2Shape
	IsometricSelectable:
		DecorationHeight: 30
	Buildable:
		Queue: Support
		BuildPaletteOrder: 30
		Prerequisites: refinery, ~!global-megawealth, ~techlevel.1
		Description: Stores excess Ore.
		BuildDuration: 125
		BuildDurationModifier: 100
	Valued:
		Cost: 300
	Tooltip:
		Name: Ore Silo
	Tooltip@NoRow:
		Name: Ore Silo
	Building:
		Footprint: xx xx
		Dimensions: 2, 2
	Health:
		HP: 30000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 4c0
	-WithSpriteBody:
	WithResourceLevelSpriteBody:
		Stages: 4
	StoresResources:
		Capacity: 2000
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Power:
		Amount: -10
		RequiresCondition: !chronodisable
	Explodes:
		RequiresCondition: !spawn-ore
	Explodes@Ore:
		Type: Footprint
		DeathTypes: NonTemporal
		Weapon: RefineryExplode
		RequiresCondition: spawn-ore
	GrantConditionOnPlayerResources:
		Condition: spawn-ore
	WithResourceStoragePipsDecoration:
		FullSequence: pip-building-yellow
		EmptySequence: pip-building-empty
		Palette: ra
		Margin: 8, 2
		PipStride: 4, 2
		Position: BottomLeft
		RequiresSelection: true
		PipCount: 12
	Voiced:
		VoiceSet: SiloVoice
		Volume: 0.8

^WarFactory:
	Inherits: ^BaseStructure
	Inherits@MC: ^MindControllableBuilding
	Inherits@PRIMARY: ^PrimaryBuilding
	Inherits@SHAPE: ^NormalFactoryShape
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 50
		Prerequisites: refinery, ~techlevel.1
		Description: Produces vehicles.\n\nAbilities:\n- Comes with 3 repair drones.\n\n  Cannot be placed on water.\n  Can be rotated.
		BuildDuration: 750
		BuildDurationModifier: 100
	Valued:
		Cost: 2000
	Tooltip:
		Name: War Factory
	Tooltip@NoRow:
		Name: War Factory
	ProvidesPrerequisite@warfactory:
		Prerequisite: warfactory
	ProvidesPrerequisite@production:
		Prerequisite: production
	Building:
		Footprint: xxxx+ xxxx+ xxxx+
		Dimensions: 5,3
		-SecondaryTerrainTypes:
	Health:
		HP: 120000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	RallyPoint:
		Path: 6,1
		Palette: mouse
		IsPlayerPalette: false
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		ExitCell: 4,1
	GrantExternalConditionToProduced:
		Condition: produced
	Production@Shared:
		Produces: Vehicle.Shared
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !multiqueue
	Production:
		Produces: Vehicle
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: multiqueue
	ProductionQueue:
		Type: Vehicle
		Group: Vehicle
		DisplayOrder: 17
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Shared:
		ProductionType: Vehicle.Shared
	ProductionBar:
		ProductionType: Vehicle
	WithExitOverlay@front:
		Sequence: build-front
		RequiresCondition: !build-incomplete && !chronodisable
	WithExitOverlay@top:
		Sequence: build-top
		RequiresCondition: !build-incomplete && !chronodisable
	WithIdleOverlay@bib:
		Sequence: bib
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	AutoTarget:
	AutoTargetPriority@DEFAULT:
		ValidTargets: Repair, AirRepair, SeaAnimalRepair
		ValidRelationships: Ally
	AttackOmni:
		PauseOnCondition: chronodisable || disabled
	Power:
		Amount: -25
		RequiresCondition: !chronodisable
	GrantConditionOnProduction@aircraft:
		Actors: zep, shad, schp, disk
		Condition: roof-open
		Duration: 50
		ShowSelectionBar: false
	WithExitOverlay@door:
		Sequence: build-front
		PauseOnCondition: disabled
		RequiresCondition: !roof-open && !build-incomplete
	WithExitOverlay@top-vehicles:
		Sequence: build-top
		PauseOnCondition: disabled
		RequiresCondition: !roof-open && !build-incomplete
	WithIdleOverlay@air-open:
		Sequence: build-air-open
		PauseOnCondition: disabled
		RequiresCondition: roof-open && !build-incomplete
	WithIdleOverlay@air-inside:
		Sequence: build-air-inside
		PauseOnCondition: disabled
		RequiresCondition: roof-open && !build-incomplete
	InfiltrateForSupportPower:
		Types: SpyInfiltrate
		Proxy: warfactory.infiltrated
		InfiltratedNotification: TechnologyStolen
		InfiltrationNotification: BuildingInfiltratedTechnologyStolen
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	Voiced:
		VoiceSet: WarFactoryVoice
		Volume: 0.8
	ProvidesPrerequisite@AIantiRush:
		Prerequisite: AIantiRush ## Hack: AI Building control. AI build refinary only when it has a combat producing line.
	ActorStatValues:
		Armaments: none

warfactory.infiltrated:
	AlwaysVisible:
	ProvidesPrerequisite:
		Prerequisite: warfactory.infiltrated

^NormalFactoryShape:
	HitShape:
		Type: Rectangle
			LocalYaw: -128
			TopLeft: -2560, -1536
			BottomRight: 1536, 1536

^Shipyard:
	Inherits: ^BaseStructure
	Inherits@MC: ^MindControllableBuilding
	Inherits@PRIMARY: ^PrimaryBuilding
	Inherits@SHAPE: ^4x4Shape
	Valued:
		Cost: 1000
	Tooltip:
		Name: Naval Yard
	Tooltip@NoRow:
		Name: Naval Yard
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 60
		Prerequisites: refinery, ~techlevel.1
		Description: Produces ships, submarines, and other naval units.\n\nAbilities:\n- Comes with 3 repair drones.\n\n  Can only be placed on water.
		BuildDuration: 625
		BuildDurationModifier: 100
	Targetable:
		TargetTypes: Ground, Water, WaterStructure
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@production:
		Prerequisite: production
	Building:
		Footprint: xxxx xxxx xxxx xxxx
		Dimensions: 4,4
		TerrainTypes: Water
		-SecondaryTerrainTypes:
		# RequiresBaseProvider: false
	Health:
		HP: 150000
	Armor:
		Type: Concrete
	RevealsShroud:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 10c0
	# X -2 column
	Exit@n2_n2:
		ExitCell: -2,-2
	Exit@n2_n1:
		ExitCell: -2,-1
	Exit@n2_0:
		ExitCell: -2,0
	Exit@n2_1:
		ExitCell: -2,1
	Exit@n2_2:
		ExitCell: -2,2
	Exit@n2_3:
		ExitCell: -2,3
	Exit@n2_4:
		ExitCell: -2,4
	Exit@n2_5:
		ExitCell: -2,5
	# X -1 column
	Exit@n1_n2:
		ExitCell: -1,-2
	Exit@n1_5:
		ExitCell: -1,5
	# X 0 column
	Exit@0_n2:
		ExitCell: 0,-2
	Exit@0_5:
		ExitCell: 0,5
	# X 1 column
	Exit@1_n2:
		ExitCell: 1,-2
	Exit@1_5:
		ExitCell: 1,5
	# X 2 column
	Exit@2_n2:
		ExitCell: 2,-2
	Exit@2_5:
		ExitCell: 2,5
	# X 3 column
	Exit@3_n2:
		ExitCell: 3,-2
	Exit@3_5:
		ExitCell: 3,5
	# X 4 column
	Exit@4_n2:
		ExitCell: 4,-2
	Exit@4_5:
		SpawnOffset: 0,-113,0
		Facing: 640
		ExitCell: 4,5
	# X 5 column
	Exit@5_n2:
		ExitCell: 5,-2
	Exit@5_n1:
		ExitCell: 5,-1
	Exit@5_0:
		ExitCell: 5,0
	Exit@5_1:
		ExitCell: 5,1
	Exit@5_2:
		ExitCell: 5,2
	Exit@5_3:
		ExitCell: 5,3
	Exit@5_4:
		SpawnOffset: 0,-113,0
		Facing: 384
		ExitCell: 5,4
	Exit@5_5:
		ExitCell: 5,5
	GrantExternalConditionToProduced:
		Condition: produced
	Production@Shared:
		Produces: Ship.Shared
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !multiqueue
	Production:
		Produces: Ship
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: multiqueue
	ProductionQueue:
		Type: Ship
		Group: Ship
		DisplayOrder: 21
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Shared:
		ProductionType: Ship.Shared
	ProductionBar:
		ProductionType: Ship
	RallyPoint:
		Path: 5,1
		Palette: mouse
		IsPlayerPalette: false
	CommandBarBlacklist:
		DisableStop: false
	# RepairsUnits:
	#	PauseOnCondition: chronodisable || disabled
	#	HpPerStep: 2000
	#	Interval: 20
	#	RepairDamageTypes: KillsDrone
	#	StartRepairingNotification: Repairing
	#	StartRepairingTextNotification: Repairing.
	#	FinishRepairingNotification: UnitRepaired
	#	FinishRepairingTextNotification: Unit repaired.
	AutoTarget:
	AutoTargetPriority@DEFAULT:
		ValidTargets: Repair, AirRepair, SeaAnimalRepair
		ValidRelationships: Ally
	AttackOmni:
		PauseOnCondition: chronodisable || disabled
	# Armament:
	# 	Weapon: RepairDroneSpawn
	# 	Cursor: repair
	# 	OutsideRangeCursor: repair
	# 	TargetRelationships: Ally
	# 	ForceTargetRelationships: Ally
	# 	PauseOnCondition: build-incomplete
	WithRangeCircle:
		Range: 6c0
		Type: repair
		Color: FF0000CC
		BorderWidth: 0
		Width: 2
	Power:
		Amount: -25
		RequiresCondition: !chronodisable
	WithIdleOverlay@waves:
		Sequence: idle-waves
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay:
		Sequence: idle-crane
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	-SpawnActorsOnSell@allies:
	-SpawnActorsOnSell@soviets:
	-SpawnActorsOnSell@psicorps:
	RequiresBuildableArea:
		Adjacent: 13
	AmbientSound:
		SoundFiles: awav03a.wav, awav03b.wav, awav03c.wav, awav03d.wav, awav03e.wav
		Interval: 150, 250
		Volume: 0.45
	Voiced:
		VoiceSet: ShipyardVoice
		Volume: 0.8
	ProvidesPrerequisite@AIantiRush:
		Prerequisite: AIantiRush ## Hack: AI Building control. AI build refinary only when it has a combat producing line.
	ActorStatValues:
		Armaments: none

^ServiceDepot:
	Inherits: ^BaseStructure
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^4x3Shape
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 80
		Prerequisites: warfactory, ~techlevel.1
		Description: Repairs vehicles and removes Terror Drones for a price.
		BuildDuration: 375
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Service Depot
	Tooltip@NoRow:
		Name: Service Depot
	ProvidesPrerequisite@default:
	ProvidesPrerequisite:
		Prerequisite: repairpad
	Building:
		Footprint: x+++ x+++ x+++
		Dimensions: 4,3
	RallyPoint:
		Path: 4,1
		Palette: mouse
		IsPlayerPalette: false
	CommandBarBlacklist:
		DisableStop: false
	SpawnNeighboringActors:
		ActorTypes: refdock
		Locations: 1,0, 1,1, 1,2, 2,0, 2,1, 2,2, 3,0, 3,1, 3,2
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Reservable:
	RepairsUnits:
		PauseOnCondition: chronodisable || disabled
		HpPerStep: 2000
		Interval: 20
		RepairDamageTypes: KillsDrone
		StartRepairingNotification: Repairing
		StartRepairingTextNotification: Repairing.
		FinishRepairingNotification: UnitRepaired
		FinishRepairingTextNotification: Unit repaired.
	ProximityExternalCondition:
		Condition: unit.sellable
		Range: 1c0
	Sellable:
		RequiresCondition: !unit.docked && !build-incomplete
	ExternalCondition@Docked:
		Condition: unit.docked
	WithIdleOverlay@bib:
		Sequence: bib
		PauseOnCondition: chronodisable
		RequiresCondition: !build-incomplete
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	WithResupplyAnimation:
		Sequence: repair
		RequiresCondition: !build-incomplete && !chronodisable
	Power:
		Amount: -35
		RequiresCondition: !chronodisable
	Voiced:
		VoiceSet: ServiceDepotVoice
		Volume: 0.8

^Radar:
	Inherits: ^BaseStructure
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 40
		Description: Provides radar.\nResearches basic upgrades.\n\nProvides a different support power depening on the subfaction.
		BuildDuration: 1125
		BuildDurationModifier: 100
	Valued:
		Cost: 1500
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@radar:
		Prerequisite: radar
	Health:
		HP: 100000
	Armor:
		Type: Wood
	ExternalCondition@disableradar:
		Condition: disableradar
	ProvidesRadar:
		RequiresCondition: !disabled && !chronodisable && !disableradar
	RevealsShroud:
		Range: 14c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 10c0
	SupportPowerChargeBar:
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	InfiltrateForExploration:
		Types: SpyInfiltrate
		InfiltratedNotification: RadarSabotaged
		InfiltrationNotification: BuildingInfiltratedRadarSabotaged
	Power:
		Amount: -75
		RequiresCondition: !chronodisable
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: RadarVoice
		Volume: 0.8

^Helipad:
	Inherits: ^BaseStructure
	Inherits@MC: ^MindControllableBuilding
	Inherits@PRIMARY: ^PrimaryBuilding
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 70
		Prerequisites: radar, ~techlevel.2
		Description: Produces aircraft.\n\nAbilities:\n- Comes with 1 repair drone.
		BuildDuration: 375
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@production:
		Prerequisite: production
	Health:
		HP: 75000
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Armor:
		Type: Wood
	Reservable:
	RallyPoint:
		Path: 3,1
		Palette: mouse
		IsPlayerPalette: false
	CommandBarBlacklist:
		DisableStop: false
	Exit@1:
		Facing: 640
		ExitCell: 1,1
		SpawnOffset: 0,0,0
	GrantExternalConditionToProduced:
		Condition: produced
	Production@Shared:
		Produces: Aircraft.Shared
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: !multiqueue
	Production:
		Produces: Aircraft
		PauseOnCondition: chronodisable || disabled
		RequiresCondition: multiqueue
	ProductionQueue:
		Type: Aircraft
		Group: Aircraft
		DisplayOrder: 26
		LowPowerModifier: 200
		ReadyAudio: UnitReady
		ReadyTextNotification: Unit ready.
		BlockedAudio: NoBuild
		BlockedTextNotification: Unable to build more.
		LimitedAudio: BuildingInProgress
		LimitedTextNotification: Unable to comply. Building in progress.
		QueuedAudio: Training
		OnHoldAudio: OnHold
		CancelledAudio: Cancelled
	ProductionBar@Shared:
		ProductionType: Aircraft.Shared
	ProductionBar:
		ProductionType: Aircraft
	AutoTarget:
	AutoTargetPriority@DEFAULT:
		ValidTargets: Repair, AirRepair, SeaAnimalRepair
		ValidRelationships: Ally
	AttackOmni:
		PauseOnCondition: chronodisable || disabled
	# Armament:
	# 	Weapon: RepairDroneSpawn
	# 	Cursor: repair
	# 	OutsideRangeCursor: repair
	# 	TargetRelationships: Ally
	# 	ForceTargetRelationships: Ally
	# 	PauseOnCondition: build-incomplete
	WithRangeCircle:
		Range: 6c0
		Type: repair
		Color: FF0000CC
		BorderWidth: 0
		Width: 2
	Power:
		Amount: -50
		RequiresCondition: !chronodisable
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	Voiced:
		VoiceSet: AirfieldVoice
		Volume: 0.8
	ActorStatValues:
		Armaments: none

^BattleLab:
	Inherits: ^BaseStructure
	Inherits@AI: ^AIMicroManagable
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Building.Shared, Building
		BuildPaletteOrder: 90
		Prerequisites: production, radar, ~techlevel.3
		Description: Allows deployment of advanced units.\nResearches advanced upgrades.\n\n  Can be rotated.
		BuildDuration: 1500
		BuildDurationModifier: 100
	Valued:
		Cost: 2000
	Tooltip:
		Name: Battle Lab
	Tooltip@NoRow:
		Name: Battle Lab
	ProvidesPrerequisite@default:
	ProvidesPrerequisite:
		Prerequisite: lab
	Health:
		HP: 75000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 6c0
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -150
		RequiresCondition: !chronodisable
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water
	GrantExternalConditionPower@forceshield:
		OrderName: FrenchForceShield
		PauseOnCondition: disabled || chronodisable
		Prerequisites:
			1: lab
		Icons:
			1: force
		Cursor: force-shield
		ChargeInterval: 4500
		Names:
			1: Force Shield
		Descriptions:
			1: Makes a group of buildings invulnerable for 15 seconds.
		Durations:
			1: 375
		Conditions:
			1: forceshield
		Dimensions:
			1: 7,7
		Footprints:
			1: ___x___ __xxx__ _xxxxx_ xxxxxxx _xxxxx_ __xxx__ ___x___
		OnFireSound: sforceon.wav
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		EndChargeSpeechNotification: ForceShieldReady
		EndChargeTextNotification: Force Shield ready.
		LaunchSpeechNotification: ForceShieldActivated
		LaunchTextNotification: Force Shield activated.
		IncomingSpeechNotification: ForceShieldActivated
		IncomingTextNotification: Force Shield activated.
		EffectImage: explosion
		EffectSequence: forceshield
		EffectPalette: effect

^PrimarySuperWeapon:
	Inherits: ^BaseStructure
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Support
		BuildPaletteOrder: 990
		BuildDuration: 1125
		BuildDurationModifier: 100
	Valued:
		Cost: 5000
	Health:
		HP: 120000
	Armor:
		Type: Concrete
	RevealsShroud:
		Range: 6c0
	RevealsShroud@ToEnemy:
		Range: 2c0
		ValidRelationships: Neutral, Enemy
		RequiresCondition: !cloaked
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown
	SupportPowerChargeBar:
	WithSupportPowerChargedOverlay:
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate
		InfiltratedNotification: BuildingInfiltrated
		InfiltrationNotification: BuildingInfiltrated
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@swlimit:
		RequiresPrerequisites: global-swlimit
	NotificationAnnouncement:
		ValidRelationships: Neutral, Enemy
		PlayToOwner: False
		PingRadar: True
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water

^SecondarySuperWeapon:
	Inherits: ^BaseStructure
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Support
		BuildPaletteOrder: 980
		BuildDuration: 750
		BuildDurationModifier: 100
	Valued:
		Cost: 2500
	Health:
		HP: 100000
	Armor:
		Type: Concrete
	RevealsShroud:
		Range: 6c0
	RevealsShroud@ToEnemy:
		Range: 2c0
		ValidRelationships: Neutral, Enemy
		RequiresCondition: !cloaked
	# RevealsShroudToIntelligenceOwner:
	#	Types: SatelliteScan
	#	Range: 6c0
	Power:
		Amount: -200
		RequiresCondition: !chronodisable
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower || powerdown
	SupportPowerChargeBar:
	WithSupportPowerChargedOverlay:
		RequiresCondition: !build-incomplete
	InfiltrateForSupportPowerReset:
		Types: SpyInfiltrate
		InfiltratedNotification: BuildingInfiltrated
		InfiltrationNotification: BuildingInfiltrated
	Targetable:
		TargetTypes: Ground, DetonateAttack, Structure, NonGarrisonableStructure, SpyInfiltrate
	Targetable@Water:
		TargetTypes: Ground, Water, WaterStructure, SpyInfiltrate
	ProvidesPrerequisite@default:
	ProvidesPrerequisite@swlimit:
		RequiresPrerequisites: global-swlimit
	NotificationAnnouncement:
		ValidRelationships: Neutral, Enemy
		PlayToOwner: False
		PingRadar: True
	WithIdleOverlay@waves:
		Sequence: idle-waves
		RequiresCondition: in_water

power:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Power Plant

refinery:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Ore Refinery

barracks:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Infantry Production

radar:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Radar

warfactory:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Vehicle Production

production:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Unit Production

repairpad:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Service Depot

QueueUpdaterDummy:
	AlwaysVisible:
	ProvidesPrerequisite:
	KillsSelf:
		RemoveInstead: true