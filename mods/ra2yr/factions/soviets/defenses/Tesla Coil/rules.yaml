tesla:
	Inherits: ^DefenseStructure
	Inherits@SHAPE: ^1x1Shape
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DRAIN: ^DiskDefenseDrainable
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@MC: ^MindControllableBuilding
	Buildable:
		Queue: Support.Shared, Support.Soviets
		Prerequisites: ~building.soviets, naradr, napowr, ~techlevel.3
		Description: Advanced base defense.\nCan be buffed or made work during low power by Tesla Troopers.\n\n  Strong vs Infantry, Vehicles\n  Weak vs Aircraft\n\nAbilities:\n- Can detect Steath units\n\nUpgradeable with:\n- Overcharge (Russia)\n\n  Requires power to operate.
		BuildPaletteOrder: 60
	RequiresBuildableArea:
		Adjacent: 2
	IsometricSelectable:
		DecorationHeight: 75
	Power:
		Amount: -75
	Health:
		HP: 60000
	Armor:
		Type: Steel
	Valued:
		Cost: 1500
	RevealsShroud:
		Range: 8c0
	Tooltip:
		Name: Soviet Tesla Coil
	Tooltip@NoRow:
		Name: Soviet Tesla Coil
	Armament:
		Weapon: CoilBolt
		Damage: 75
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && !charged) || (lowpower && charged == 2))
	Armament@charged:
		Weapon: OPCoilBolt
		Damage: 100
		LocalOffset: 0,0,3072
		RequiresCondition: ((!lowpower && charged >= 1) || (lowpower && charged >= 3))
	AttackTesla:
		ReloadDelay: 80
		InitialChargeDelay: 25
		ChargeDelay: 0
		ChargeAudio: btespow.wav
		PauseOnCondition: build-incomplete || disabled || chronodisable
	Targetable@TeslaBoost:
		TargetTypes: TeslaBoost
	GrantCondition@IDISABLE:
		RequiresCondition: lowpower && charged <= 1
	ExternalCondition@CHARGED:
		Condition: charged
		SourceCap: 1
	WithIdleOverlay@powered:
		Sequence: powered
		PauseOnCondition: chronodisable
		RequiresCondition: !disabled && !build-incomplete
	WithTeslaChargeOverlay:
	Voiced:
		VoiceSet: TeslaCoilVoice
		Volume: 0.8
