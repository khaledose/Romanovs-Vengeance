schp:
	Inherits: ^Helicopter
	Inherits@AUTOTARGET: ^AutoTargetAllAssaultMove
	Inherits@CHAOS: ^BerserkableVoxel
	Inherits@EXPERIENCE: ^GainsExperience
	Inherits@VETERAN: ^ProducibleAsVeteranVehicle
	Inherits@MC: ^MindControllable
	Inherits@RADIATON: ^DamagedByRadiation50Percent
	Inherits@AI: ^AIMicroManagable
	Valued:
		Cost: 1400
	DeliversCash:
		Payload: 1400
	Tooltip:
	Tooltip@NoRow:
		Name: Siege Chopper
	AutoTargetPriority@DEFAULT:
		RequiresCondition: !stance-attackanything && !assault-move && !deployed
	AutoTargetPriority@ATTACKANYTHING:
		RequiresCondition: (stance-attackanything || assault-move) && !deployed
	AutoTargetPriority@DEFAULT_GROUND:
		RequiresCondition: !stance-attackanything && !assault-move && deployed
		ValidTargets: Infantry, Vehicle, Ship, Water, Underwater, Defense
		InvalidTargets: NoAutoTarget, WaterStructure
	AutoTargetPriority@ATTACKANYTHING_GROUND:
		RequiresCondition: (stance-attackanything || assault-move) && deployed
		ValidTargets: Infantry, Vehicle, Ship, Water, Underwater, Structure, Defense
		InvalidTargets: NoAutoTarget
	DamagedByTintedCells:
		RequiresCondition: !airborne
	Selectable:
		Class: schp
		Bounds: 1689, 2896, 0, -965
	Health:
		HP: 30000
	Armor:
		Type: Light
	Armament@primary:
		Weapon: SiegeChopperCannon
		Damage: 60
		LocalOffset: 640,-256,0, 640,256,0
		ReloadingCondition: reload-ground
		PauseOnCondition: deployed || reload-air
		RequiresCondition: !rank-elite && undeployed
	Armament@primary-aa:
		Weapon: SiegeChopperCannonAA
		LocalOffset: 640,-256,0, 640,256,0
		EnableSplitRanges: true
		ReloadingCondition: reload-air
		PauseOnCondition: deployed || reload-ground
		RequiresCondition: !rank-elite && undeployed
	Armament@elite:
		Weapon: SiegeChopperCannonE
		Damage: 90
		LocalOffset: 640,-256,0, 640,256,0
		ReloadingCondition: reload-ground
		PauseOnCondition: deployed || reload-air
		RequiresCondition: rank-elite && undeployed
	Armament@elite-aa:
		Weapon: SiegeChopperCannonAAE
		LocalOffset: 640,-256,0, 640,256,0
		EnableSplitRanges: true
		ReloadingCondition: reload-air
		PauseOnCondition: deployed || reload-ground
		RequiresCondition: rank-elite && undeployed
	Armament@deployed:
		Name: deployed
		Weapon: 160mm
		Damage: 90
		MuzzleSequence: muzzle
		LocalOffset: 768,0,2048
		RequiresCondition: !rank-elite && deployed
	Armament@elite-deployed:
		Name: deployed
		Weapon: 160mmE
		Damage: 180
		MuzzleSequence: muzzle
		LocalOffset: 768,0,2048
		RequiresCondition: rank-elite && deployed
	WithMuzzleOverlay:
	Turreted:
		TurnSpeed: 80
	Voiced:
		VoiceSet: SiegeChopperVoice
	ExternalCondition@PRODUCED:
		Condition: produced
	VoiceAnnouncement:
		RequiresCondition: produced
		Voice: Build
		ValidRelationships: None
	Buildable:
		Queue: Aircraft.Shared, Aircraft.Soviets, Aircraft.USSR, Aircraft.Vietnam, Aircraft.Cuba, Aircraft.Libya
		BuildPaletteOrder: 10
		Prerequisites: ~aircraft.soviets, natech, ~techlevel.3
		Description: Helicopter capable of deploying into a long range artillery.\n\nMobile:\n  Strong vs Infantry\n  Weak vs Vehicles\nDeployed:\n  Strong vs Buildings, Vehicles\n  Weak vs Aircraft\n\nAbilities:\n- Can detect Stealth units\n\nUpgradeable with:\n- Armor-Piercing Bullets
		BuildDuration: 625
		BuildDurationModifier: 100
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	RevealsShroud:
		Range: 10c0
	RevealsShroud@Ground:
		Range: 10c0
	# RevealsShroudToIntelligenceOwner:
	#	Range: 10c0
	#	Types: SatelliteScan
	#	Type: GroundPosition
	DetectCloaked:
		Range: 5c0
	RenderDetectionCircle:
		RenderOnGround: true
	AttackTurreted:
		Armaments: primary, deployed
		Voice: DeployedAttack
		PauseOnCondition: (!deployed && !undeployed) || (undeployed && !cruising) || chronodisable
	Aircraft:
		CanForceLand: false
		LandableTerrainTypes: Clear, Sand, Rough, Road, DirtRoad, Ore, Gems
		Crushes: crate
		CrushDamageTypes: NonTemporal
		TurnSpeed: 40
		Speed: 165
		AltitudeVelocity: 200
		CruisingCondition: cruising
		PauseOnCondition: !undeployed || chronodisable
	HeliGrantConditionOnDeploy:
		BodyNames: dot
		DeployAnimation: deploy
		DeployedCondition: deployed
		UndeployedCondition: undeployed
		DeploySound: vchodepa.wav
		UndeploySound: vchodepa.wav
		AllowedTerrainTypes: Clear, Rough, Road, DirtRoad, Ore, Gems
		DeployVoice: Deploy
		UndeployVoice: Move
		CanDeployOnRamps: true
		SynchronizeDeployment: True
		PauseOnCondition: chronodisable
	WithSpriteBody@dot:
		Sequence: dot
		Name: dot
	RenderSprites:
		Image: schp
	RenderVoxels:
		Image: schp
	Repairable:
		Voice: Move
		RepairActors: gadept, nadept, nadepb, caoutp, caoutb
	RepairableNear:
		Voice: Move
		CloseEnough: 3c0
		RepairActors: gaweap, gaweab, gaweac, gawead, naweap, naweab, naweac, nawead, yaweap, yaweab, yaweac, yawead, gayard, nayard, yayard, gaairc, gaairb, baairf, baairb, naheli, yadisk
	Targetable@MC:
		RequiresCondition: !controlled && !permamc && !airborne
	Targetable@CHAOS:
		RequiresCondition: !airborne
	RejectsOrders@deployment:
		Reject: Move
		RequiresCondition: !undeployed && !airborne
	RejectsOrders@wierdtakeoff:
		RequiresCondition: !undeployed && airborne
	WithVoxelHelicopterBody:
		TickRate: 1
		ShowShadow: false
		RequiresCondition: undeployed
	WithFacingSpriteBody:
		Sequence: shadow
		ForceToGround: true
		RequiresCondition: undeployed
	WithVoxelBody:
		Sequence: deployed
		RequiresCondition: deployed
	WithVoxelTurret:
		RequiresCondition: deployed
	Hovers@CRUISING:
		RequiresCondition: cruising
		BobDistance: -45
	WithRangeCircle:
		Range: 12c0
		RequiresCondition: deployed
	SpawnActorOnDeath:
		DeathType: NonTemporal
		Actor: schphusk
		RequiresCondition: airborne
	Explodes:
		DeathTypes: NonTemporal
		Weapon: UnitExplode
		RequiresCondition: !airborne
	AmbientSound@Move:
		SoundFiles: vcholo2a.wav, vcholo2b.wav, vcholo2c.wav
		Volume: 0.45
		RequiresCondition: moving
	SoundAnnouncement@end:
		SoundFiles: vcholo3a.wav
		Volume: 0.45
		RequiresCondition: !moving
	GrantConditionOnMovement:
		Condition: moving
	HitShape:
	# AutoDeployer@AI:
	# 	RequiresCondition: ai-control
	# 	DeployChance: 50
	# 	DeployTicks: 300
	# 	UndeployTicks: 200
	# 	DeployTrigger: Periodically
	RejectsOrders@deploymentAI:
		Reject: AttackMove, AssaultMove, Attack #HACK: Deployed Siege Chopper will try to aim orignal target set by squad if not block the Attack order
		RequiresCondition: ai-control && !undeployed

schphusk:
	Inherits: ^HelicopterHusk
	Tooltip:
	Tooltip@NoRow:
		Name: Siege Chopper
	Aircraft:
		TurnSpeed: 40
		Speed: 165
	RevealsShroud:
		Range: 10c0
		Type: GroundPosition
	# RevealsShroudToIntelligenceOwner:
	#	Range: 10c0
	#	Types: SatelliteScan
	#	Type: GroundPosition
	RevealOnDeath:
		Radius: 10c0
		Duration: 125
	RenderSprites:
		Image: schp
	RenderVoxels:
		Image: schp
	-WithVoxelBody:
	WithVoxelHelicopterBody:
		TickRate: 1
		ShowShadow: false
	WithFacingSpriteBody:
		Sequence: shadow
		ForceToGround: true
	BodyOrientation:
		UseClassicPerspectiveFudge: false

